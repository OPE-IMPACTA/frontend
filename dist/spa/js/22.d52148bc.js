(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{bd3c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.editItem||t.forceRedirect()?a("q-page",{staticClass:"row items-center justify-evenly"},[a("div",{staticClass:"col-md-6"},[a("q-card",[a("q-card-section",[t.changePassword?a("div",{staticClass:"text-h5 text-primary text-center"},[t._v("\n          Atualizar senha\n        ")]):a("div",{staticClass:"text-h5 text-primary text-center"},[t._v("\n          Atualizar usuário\n        ")])]),a("q-list",[a("q-form",{ref:"userCreateForm",staticClass:"form",on:{submit:t.handleSubmit}},[a("q-card-section",[a("user-management",{attrs:{visibilityFields:t.visibilityFields,changePassword:t.changePassword,editItem:t.newEditItem}})],1),a("div",{staticClass:"text-right"},[a("q-btn",{staticClass:"q-ma-ls",attrs:{label:"Cancelar"},on:{click:t.handleCancelAdd}}),a("q-btn",{staticClass:"q-ma-md",attrs:{label:"Salvar",type:"submit",color:"primary"}}),t.btnEdit?a("q-btn",{staticClass:"q-mr-md",attrs:{label:"Editar senha",color:"orange"},on:{click:function(e){return t.handleChangeVisibilityPassword(!0,!1,!1)}}}):t._e()],1)],1)],1)],1)],1)]):t._e()},i=[],r=a("08d1"),o=a("dde5f"),n=a("a976"),d=a("3c96"),c=a("bcc6"),u={name:"UserUpdate",props:{editItem:{}},components:{UserManagement:r["a"]},data(){return{visibilityFields:!0,changePassword:!1,btnEdit:!0,newEditItem:this.editItem}},methods:{async updateUser({id:t,updateData:e}){const a=await Object(c["a"])("Atualizar usuário","Tem certeza que deseja alterar os dados do usuário?","Alterar");if(a.isConfirmed)try{const{errors:a}=await o["a"].user.updateUser({id:t,data:e});if(!a)return this.$toast.success("Usuário alterado com sucesso!",{timeout:2e3}),void await this.$router.push({name:"User"});if(401===a.status)return this.$toast.error("Token inválido!",{timeout:2e3}),Object(d["a"])(),void await this.$router.push({name:"Login"});400===a.status&&this.$toast.error("E-mail está sendo utilizado por outro usuário!",{timeout:3e3}),await Object(n["a"])(2e3)}catch(s){this.$toast.error("Ocorreu um erro ao deletar o usuário!",{timeout:2e3})}},handleSubmit(){const{_id:t,name:e,email:a,password:s,confirmPassword:i}=this.newEditItem;s&&i?this.updateUser({id:t,updateData:{password:s,confirmPassword:i}}):this.updateUser({id:t,updateData:{name:e,email:a,group_id:this.newEditItem.group.value}})},handleChangeVisibilityPassword(t,e,a){this.changePassword=t,this.visibilityFields=e,this.btnEdit=a},async handleCancelAdd(){if(this.changePassword)return this.newEditItem.password="",this.newEditItem.confirmPassword="",void this.handleChangeVisibilityPassword(!1,!0,!0);const t=await Object(c["a"])("Cancelar cadastro","Tem certeza que deseja cancelar o cadastro do usuário?","Cancelar");t.isConfirmed&&await this.$router.push({name:"User"})},forceRedirect(){this.$router.push({name:"User"})}}},l=u,m=a("2877"),h=a("9989"),w=a("f09f"),p=a("a370"),b=a("1c1c"),f=a("0378"),C=a("9c40"),v=a("eebe"),g=a.n(v),y=Object(m["a"])(l,s,i,!1,null,null,null);e["default"]=y.exports;g()(y,"components",{QPage:h["a"],QCard:w["a"],QCardSection:p["a"],QList:b["a"],QForm:f["a"],QBtn:C["a"]})}}]);